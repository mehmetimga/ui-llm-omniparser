# Login Flow Test Suite
# Tests the authentication flow of the Poker Admin panel

metadata:
  name: Login Flow
  description: Tests user authentication including login and logout
  version: "1.0.0"
  author: QA Team
  tags:
    - auth
    - critical
    - smoke
  app: poker-admin
  environment:
    baseUrl: http://localhost:3000
    viewport:
      width: 1920
      height: 1080
    browser: chromium

steps:
  - name: Navigate to login page
    description: Open the application and verify login page loads
    actions:
      - type: NAVIGATE
        url: http://localhost:3000
        description: Navigate to application root
      - type: WAIT
        ms: 2000
        description: Wait for page to load
      - type: ASSERT
        predicate:
          kind: TEXT_EXISTS
          value: Sign In
        description: Verify login page Sign In button is visible (LLaVA detection)

  - name: Verify login form elements
    description: Check that login button and form inputs are present (LLaVA 13b detection)
    actions:
      - type: ASSERT
        predicate:
          kind: TEXT_EXISTS
          value: Poker
        description: Header is visible (LLaVA detects "Poker" or "Poker Dome")
      - type: ASSERT
        predicate:
          kind: TEXT_EXISTS
          value: Password
        description: Password label is visible (LLaVA 13b detects form labels)

  - name: Enter credentials and click Sign In
    description: Type email, password, and click Sign In button
    actions:
      - type: CLICK
        target: selector:input[type="text"], input[type="email"]
        description: Click on email input field
      - type: TYPE
        target: selector:input[type="text"], input[type="email"]
        text: admin@poker.com
        description: Enter email address
      - type: CLICK
        target: selector:input[type="password"]
        description: Click on password input field
      - type: TYPE
        target: selector:input[type="password"]
        text: secretpassword123
        description: Enter password
      - type: WAIT
        ms: 500
        description: Wait for input to settle
      - type: CLICK
        target: locator:Sign In
        description: Click Sign In button using Playwright locator
      - type: WAIT
        ms: 2000
        description: Wait for login to process

  - name: Verify successful login
    description: Check that dashboard is displayed after login
    actions:
      - type: WAIT
        ms: 500
        description: Wait for dashboard to fully load
      - type: ASSERT
        predicate:
          kind: URL_CONTAINS
          value: dashboard
        description: URL contains dashboard

  - name: Logout
    description: Click logout button and verify return to login
    actions:
      - type: CLICK
        target: locator:Logout
        description: Click Logout button using Playwright locator
      - type: WAIT
        ms: 2000
        description: Wait for logout to complete
      - type: ASSERT
        predicate:
          kind: TEXT_EXISTS
          value: Sign In
        description: Login page is displayed (Sign In button visible)


