# Login Flow Test Suite
# Tests the authentication flow of the Poker Admin panel

metadata:
  name: Login Flow
  description: Tests user authentication including login and logout
  version: "1.0.0"
  author: QA Team
  tags:
    - auth
    - critical
    - smoke
  app: poker-admin
  environment:
    baseUrl: http://localhost:3000
    viewport:
      width: 1920
      height: 1080
    browser: chromium

steps:
  - name: Navigate to login page
    description: Open the application and verify login page loads
    actions:
      - type: NAVIGATE
        url: http://localhost:3000
        description: Navigate to application root
      - type: WAIT
        ms: 1000
        description: Wait for page to load
      - type: ASSERT
        predicate:
          kind: TEXT_EXISTS
          value: POKER ADMIN
        description: Verify login page header is visible

  - name: Verify login form elements
    description: Check that all login form elements are present
    actions:
      - type: ASSERT
        predicate:
          kind: TEXT_EXISTS
          value: Email Address
        description: Email label is visible
      - type: ASSERT
        predicate:
          kind: TEXT_EXISTS
          value: Password
        description: Password label is visible
      - type: ASSERT
        predicate:
          kind: TEXT_EXISTS
          value: Sign In
        description: Sign in button is visible

  - name: Enter credentials and click Sign In
    description: Type email, password, and click Sign In button
    actions:
      - type: PRESS_KEY
        key: Tab
        description: Tab to email field
      - type: PRESS_KEY
        key: Tab
        description: Tab to email input
      - type: TYPE
        target: text:adminmpokercom
        text: admin@poker.com
        description: Enter email address
      - type: PRESS_KEY
        key: Tab
        description: Tab to password field
      - type: TYPE
        target: text:possword
        text: secretpassword123
        description: Enter password
      - type: WAIT
        ms: 500
        description: Wait for input to settle
      - type: CLICK
        target: locator:Sign In
        description: Click Sign In button using Playwright locator
      - type: WAIT
        ms: 2000
        description: Wait for login to process

  - name: Verify successful login
    description: Check that dashboard is displayed after login
    actions:
      - type: WAIT
        ms: 500
        description: Wait for dashboard to fully load
      - type: ASSERT
        predicate:
          kind: URL_CONTAINS
          value: dashboard
        description: URL contains dashboard

  - name: Logout
    description: Click logout button and verify return to login
    actions:
      - type: CLICK
        target: text:Logout
        description: Click Logout button using OmniParser coordinate detection
      - type: WAIT
        ms: 2000
        description: Wait for logout to complete
      - type: ASSERT
        predicate:
          kind: TEXT_EXISTS
          value: Sign In
        description: Login page is displayed (Sign In button visible)


